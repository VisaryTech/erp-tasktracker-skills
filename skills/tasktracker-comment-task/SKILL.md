---
name: tasktracker-comment-task
description: Публикация комментария в задачу ERP TaskTracker по ID задачи. Использовать, когда пользователь просит оставить комментарий в задаче ERP TaskTracker, опубликовать замечания/уточнения в задаче или добавить структурированный фидбек по конкретному taskId.
---

# TaskTracker Comment Task

Используй этот скилл для безопасной публикации комментария в задачу TaskTracker.

## Обязательные входные данные

- ID задачи (`taskId`)
- Текст комментария

## Порядок выполнения

1. Получи от пользователя `taskId` и текст комментария.
2. Подготовь комментарий: кратко, структурированно, без лишнего текста.
3. Отправь комментарий через `scripts/post_task_comment.py`.
4. Верни пользователю результат публикации (`taskId` и ответ API).

## Команды

Опубликовать комментарий строкой:

```bash
python <skill_dir>/scripts/post_task_comment.py --task-id "12345" --text "Текст комментария"
```

Опубликовать комментарий из файла:

```bash
python <skill_dir>/scripts/post_task_comment.py --task-id "12345" --text-file "comment.md"
```

Опубликовать комментарий в другом ERP-контуре:

```bash
python <skill_dir>/scripts/post_task_comment.py --erp-base-url "<erp_base_url>" --task-id "12345" --text "Текст комментария"
```

Где `<skill_dir>` — директория текущего скилла (путь, из которого открыт этот `SKILL.md`).

Запускать команду с `workdir` в корень пользовательского проекта (где находится `.env`), а не из директории skill.

## Требования к устойчивости

- Используй `.env` или переменные окружения `erp_client_id` и `erp_client_secret`.
- Для домена ERP используй `erp_base_url` из `.env` (или `--erp-base-url` в явном виде).
- Загружай `.env` из корня пользовательского проекта через корректный `workdir`; не запускай из директории skill.
- Не отправляй пустой комментарий.
- При ошибке API явно показывай код/причину и останавливай выполнение.
- Не выдумывай `taskId`: используй ID, который дал пользователь.
